(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(t,e,a){a(38),t.exports=a(223)},223:function(t,e){},35:function(t,e,a){window._=a(36),window.axios=a(4),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"},38:function(t,e,a){"use strict";a.r(e);var s,o=a(3),n=a(2),r=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),l=function(t,e,a,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,s);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(r=(n<3?o(r):n>3?o(e,a,r):o(e,a))||r);return n>3&&r&&Object.defineProperty(e,a,r),r},i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),l([Object(n.b)({default:!1})],e.prototype,"isShowAlert",void 0),l([Object(n.b)({default:"default"})],e.prototype,"alertLevel",void 0),l([Object(n.b)({default:""})],e.prototype,"alertIconClass",void 0),l([Object(n.b)({default:""})],e.prototype,"alertMessage",void 0),e=l([n.a],e)}(n.c),c=a(6),u=Object(c.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"show",rawName:"v-show",value:this.isShowAlert,expression:"isShowAlert"}],staticClass:"alert",class:"alert-"+this.alertLevel,attrs:{role:"alert"}},[e("i",{class:this.alertIconClass}),this._v(" "+this._s(this.alertMessage)+"\n")])}),[],!1,null,null,null).exports,f=a(4),p=a.n(f),d=a(40),b=function(){var t=function(e,a){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(e,a)};return function(e,a){function s(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}(),h=function(t,e,a,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,s);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(r=(n<3?o(r):n>3?o(e,a,r):o(e,a))||r);return n>3&&r&&Object.defineProperty(e,a,r),r};n.c.use(d.a);var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jobList=[],e.fields=[],e.jobNum=0,e.isAutoReload=!1,e.isShowAlert=!1,e.alertLevel="default",e.alertIconClass="",e.alertMessage="",e}return b(e,t),e.prototype.mounted=function(){console.log("JobListComponent mounted."),n.c.nextTick(this.updateList)},e.prototype.addJob=function(){var t=this;this.isShowAlert=!1,p.a.post("/job-list").then((function(e){t.jobList=e.data.jobList,t.jobNum=t.jobList.length,t.alertLevel="success",t.alertIconClass="",t.alertMessage="ジョブを追加しました。",t.isShowAlert=!0})).catch((function(e){t.alertLevel="danger",t.alertIconClass="",t.alertMessage="ジョブの追加に失敗しました。",t.isShowAlert=!0}))},e.prototype.updateList=function(){var t=this;p.a.get("/job-list").then((function(e){t.jobList=e.data.jobList,t.fields=[{key:"id",label:"ID"},{key:"name",label:"ジョブ名"},{key:"status",label:"ステータス",formatter:function(e,a,s){return{icon:t.getStatusIcon(s.status),color:t.getStatusColor(s.status),name:t.getStatusName(s.status)}}},{key:"created_at",label:"作成日時"},{key:"job_started_at",label:"ジョブ実行開始日時"},{key:"job_completed_at",label:"ジョブ実行完了日時"}],t.jobNum=t.jobList.length,t.isAutoReload&&window.setTimeout(t.updateList,1e3)}))},e.prototype.resetList=function(){var t=this;this.isShowAlert=!1,p.a.post("/job-list/reset").then((function(e){t.jobList=e.data.jobList,t.jobNum=t.jobList.length,t.alertLevel="success",t.alertIconClass="",t.alertMessage="ジョブリストをリセットしました。",t.isShowAlert=!0})).catch((function(e){t.alertLevel="danger",t.alertIconClass="",t.alertMessage="ジョブリストのリセットに失敗しました。",t.isShowAlert=!0}))},e.prototype.onAutoReloadChanged=function(){this.isAutoReload&&window.setTimeout(this.updateList,1e3)},e.prototype.getStatusName=function(t){var e;switch(t){case 0:e="準備中";break;case 1:e="ジョブ実行中";break;case 2:e="ジョブ失敗";break;case 3:e="ジョブ成功";break;default:e="不明"}return e},e.prototype.getStatusIcon=function(t){var e;switch(t){case 0:e="far fa-clock";break;case 1:e="fas fa-spinner fa-spin";break;case 2:e="fas fa-times";break;case 3:e="fas fa-check-circle";break;default:e="fas fa-question"}return e},e.prototype.getStatusColor=function(t){var e;switch(t){case 0:e="";break;case 1:e="text-primary";break;case 2:e="text-danger";break;case 3:e="text-success";break;default:e="text-muted"}return e},e=h([Object(n.a)({components:{AlertPanelComponent:u}})],e)}(n.c),y=Object(c.a)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-2"},[a("h2",[a("i",{staticClass:"fas fa-list"}),t._v(" ジョブ一覧 "),a("span",{staticClass:"mx-2 px-1 text-white bg-info"},[t._v(t._s(t.jobNum))])]),t._v(" "),a("AlertPanelComponent",{attrs:{"is-show-alert":t.isShowAlert,"alert-level":t.alertLevel,"alert-icon-class":t.alertIconClass,"alert-message":t.alertMessage}}),t._v(" "),a("div",{staticClass:"float-right form-inline"},[a("button",{staticClass:"m-1 btn btn-primary",attrs:{type:"button"},on:{click:t.addJob}},[a("i",{staticClass:"fas fa-plus"}),t._v(" ジョブ追加")]),t._v(" "),a("button",{staticClass:"m-1 btn btn-secondary",attrs:{type:"button"},on:{click:t.updateList}},[a("i",{staticClass:"fas fa-sync"})]),t._v(" "),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isAutoReload,expression:"isAutoReload"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"autoReloadCheck"},domProps:{checked:Array.isArray(t.isAutoReload)?t._i(t.isAutoReload,null)>-1:t.isAutoReload},on:{change:[function(e){var a=t.isAutoReload,s=e.target,o=!!s.checked;if(Array.isArray(a)){var n=t._i(a,null);s.checked?n<0&&(t.isAutoReload=a.concat([null])):n>-1&&(t.isAutoReload=a.slice(0,n).concat(a.slice(n+1)))}else t.isAutoReload=o},t.onAutoReloadChanged]}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"autoReloadCheck"}},[t._v("自動更新")])]),t._v(" "),a("button",{staticClass:"m-1 btn btn-danger",attrs:{type:"button"},on:{click:t.resetList}},[a("i",{staticClass:"fas fa-trash"})])]),t._v(" "),a("div",{staticClass:"my-2"}),t._v(" "),a("div",{staticClass:"p-2 shadow-sm"},[a("b-table",{attrs:{hover:"",small:"",items:t.jobList,fields:t.fields},scopedSlots:t._u([{key:"cell(status)",fn:function(e){return[a("span",{class:e.value.color},[a("i",{class:e.value.icon}),t._v(" "+t._s(e.value.name))])]}}])})],1)],1)}),[],!1,null,null,null).exports;a(35),o.a.component("job-list-component",y);new o.a({el:"#job-list"})}},[[16,1,2]]]);